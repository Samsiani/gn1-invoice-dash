/* ==========================================================================
   Invoice Statistics Dashboard Styles
   Version: 3.7.0 (Compact Cards)
   ========================================================================== */

.cig-statistics-wrap { margin: 20px 20px 20px 0; }

/* Main Title */
.cig-stats-main-title {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 3px solid #50529d;
}

#cig-refresh-stats { display: inline-flex; align-items: center; gap: 5px; }
#cig-refresh-stats .dashicons { font-size: 16px; width: 16px; height: 16px; }

.auto-refresh-indicator {
  display: inline-flex; align-items: center; gap: 5px;
  font-size: 11px; color: #6c757d; margin-left: 10px;
}
.auto-refresh-indicator .dashicons {
  font-size: 14px; width: 14px; height: 14px;
  animation: spin 2s linear infinite;
}
@keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }

/* TABS */
.cig-stats-tabs {
    margin-bottom: 20px;
    background: #fff;
    padding: 0 20px;
    border-bottom: 1px solid #ccc;
}
.cig-stats-tabs .nav-tab {
    font-size: 13px;
    font-weight: 600;
    padding: 8px 15px;
    margin-right: 4px;
    color: #555;
    background: #f1f1f1;
    border: 1px solid #ccc;
    border-bottom: none;
}
.cig-stats-tabs .nav-tab-active {
    background: #fff;
    color: #50529d;
    border-bottom: 1px solid #fff;
    margin-bottom: -1px;
}

/* Filters Bar */
.cig-stats-filters-bar {
  background: #fff; border: 1px solid #ddd; border-radius: 6px;
  padding: 15px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.03);
}
.cig-filters-row { display: flex; flex-wrap: wrap; gap: 15px; align-items: flex-end; }
.cig-filter-group { display: flex; flex-direction: column; gap: 5px; }
.cig-filter-group label { font-weight: 600; font-size: 11px; color: #555; margin: 0; text-transform: uppercase; }

.cig-quick-filters { display: flex; gap: 5px; flex-wrap: wrap; }
.cig-quick-filter-btn {
  padding: 6px 12px; border: 1px solid #ddd; background: #fff; border-radius: 4px;
  cursor: pointer; font-size: 12px; font-weight: 500; color: #555; transition: all 0.2s ease;
}
.cig-quick-filter-btn:hover { border-color: #50529d; color: #50529d; background: #f8f9ff; }
.cig-quick-filter-btn.active { border-color: #50529d; background: #50529d; color: #fff; font-weight: 600; }

.cig-date-range { display: flex; align-items: center; gap: 8px; }
.cig-date-input, .cig-select-filter {
  padding: 6px 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px; min-width: 180px; height: 32px;
}

/* --- COMPACT SUMMARY CARDS --- */
.cig-stats-summary {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px; margin-bottom: 20px;
}
.cig-stat-card {
  background: #fff; border-radius: 6px; padding: 12px 15px; display: flex; gap: 12px; align-items: center;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05); border: 1px solid #e0e0e0;
  transition: transform 0.15s ease, box-shadow 0.15s ease; cursor: pointer;
}
.cig-stat-card:hover { transform: translateY(-2px); box-shadow: 0 3px 8px rgba(0,0,0,0.08); border-color: #d0d0d0; }

.cig-stat-icon {
  width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}
.cig-stat-icon .dashicons { font-size: 20px; width: 20px; height: 20px; color: #fff; }

.cig-stat-content { flex: 1; display: flex; flex-direction: column; justify-content: center; }
.cig-stat-label {
  font-size: 11px; color: #777; font-weight: 600; margin: 0;
  text-transform: uppercase; letter-spacing: 0.3px; line-height: 1.2;
}
.cig-stat-value {
  font-size: 18px; font-weight: 700; color: #333; margin: 2px 0 0 0; line-height: 1.2;
}
.loading-stat { color: #ccc; font-size: 14px; }
.cig-stat-trend { font-size: 10px; margin-top: 2px; font-weight: 500; color: #888; }

/* Summary Dropdowns */
.cig-summary-dropdown {
  background: #fff; border: 1px solid #dee2e6; border-radius: 6px;
  margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}
.cig-summary-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 10px 15px; border-bottom: 1px solid #e9ecef; background: #f8f9fa;
}
.cig-summary-header h3 { margin: 0; font-size: 14px; color: #333; font-weight: 600; }
.cig-summary-close { border-radius: 3px; padding: 0 8px; min-height: 24px; line-height: 24px; font-size: 12px; }
.cig-summary-body { padding: 0; }

/* Tables */
.cig-table-container { overflow-x: auto; }
.cig-stats-table { width: 100%; border-collapse: collapse; font-size: 13px; }
.cig-stats-table thead { background: #f8f9fa; border-bottom: 2px solid #dee2e6; }
.cig-stats-table th {
  padding: 10px 15px; text-align: left; font-weight: 600; color: #495057; font-size: 12px;
  text-transform: uppercase; letter-spacing: 0.5px; white-space: nowrap; user-select: none;
}
.cig-stats-table tbody tr { border-bottom: 1px solid #e9ecef; transition: background-color 0.15s ease; }
.cig-stats-table tbody tr:hover { background-color: #f8f9fa; }
.cig-stats-table td { padding: 10px 15px; color: #333; vertical-align: middle; }

/* Clickable user row */
.cig-user-row { cursor: pointer; }
.cig-user-row:hover td { background-color: #f8f9fa; }
.cig-user-row:active { background-color: #e9ecef; }

/* Sortable headers */
.sort-arrows {
  display: inline-flex; flex-direction: column; margin-left: 4px; line-height: 1;
  vertical-align: middle; opacity: 0.4; transition: opacity 0.2s ease;
}
.sortable:hover .sort-arrows { opacity: 0.7; }
.sortable.active-sort .sort-arrows { opacity: 1; }
.arrow-up, .arrow-down { font-size: 7px; height: 5px; color: #6c757d; }
.sortable.active-sort[data-order="asc"] .arrow-up { color: #50529d; font-weight: bold; }
.sortable.active-sort[data-order="desc"] .arrow-down { color: #50529d; font-weight: bold; }

/* Buttons */
.cig-btn-sm {
  padding: 4px 8px; font-size: 11px; border-radius: 3px; cursor: pointer; text-decoration: none;
  display: inline-block; transition: all 0.2s ease; border: 1px solid;
}
.cig-btn-view { background: #fff; border-color: #17a2b8; color: #17a2b8; }
.cig-btn-view:hover { background: #17a2b8; color: #fff; }
.cig-btn-edit { background: #fff; border-color: #ffc107; color: #856404; }
.cig-btn-edit:hover { background: #ffc107; color: #fff; }

/* Chart Card */
.cig-chart-card {
  background: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 15px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05); position: relative;
}
.cig-chart-card h3 { margin: 0 0 15px 0; font-size: 14px; color: #333; font-weight: 600; }
.cig-chart-wrapper { position: relative; min-height: 220px; }
.cig-chart-empty {
  position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
  color: #999; font-size: 13px; background: #fff; border: 1px dashed #e9ecef; border-radius: 6px;
}

/* Loading */
.loading-row td { padding: 40px 20px; text-align: center; }
.cig-loading-spinner { display: flex; flex-direction: column; align-items: center; gap: 10px; }
.spinner {
  border: 3px solid #f3f3f3; border-top: 3px solid #50529d;
  border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite;
}

/* Grid Layout */
.cig-stats-grid {
  display: grid; grid-template-columns: 350px 1fr; gap: 20px; margin-bottom: 30px;
}

/* Users panel & detail panel headers */
.cig-users-header-inline,
.cig-user-detail-header-inline {
  padding: 12px 15px; border-bottom: 1px solid #e9ecef; background: #f8f9fa;
  display: flex; justify-content: space-between; align-items: center;
}
.cig-users-header-inline h2, 
.cig-user-detail-header-inline h2 { font-size: 15px; margin: 0; }

.cig-user-detail-controls { display: flex; align-items: center; gap: 10px; }
.cig-user-invoices-filters-inline {
  display: flex; gap: 8px; flex-wrap: wrap; align-items: center;
}
.cig-user-invoices-filters-inline .cig-search-input { min-width: 180px; height: 30px; font-size: 12px; }
.cig-per-page-select { height: 30px; font-size: 12px; }

/* User info card inside detail panel */
.cig-user-info-card {
  background: linear-gradient(135deg, #50529d 0%, #3d3e7a 100%);
  border-radius: 6px; padding: 20px; margin: 15px; color: #fff;
  display: flex; align-items: center; gap: 15px;
}
.user-info-avatar {
  width: 60px; height: 60px; border-radius: 50%; border: 3px solid rgba(255,255,255,0.3);
}
.user-info-details h3 { margin: 0 0 3px 0; font-size: 20px; color: #fff; }
.user-info-email { margin: 0 0 10px 0; opacity: 0.9; font-size: 13px; }
.user-info-stats { display: flex; gap: 20px; flex-wrap: wrap; }
.user-info-stat { display: flex; flex-direction: column; }
.user-info-stat-label {
  font-size: 11px; opacity: 0.8; text-transform: uppercase; letter-spacing: 0.5px;
}
.user-info-stat-value { font-size: 16px; font-weight: 700; margin-top: 2px; }

/* Panel containers */
#cig-users-panel,
#cig-user-detail-panel {
  padding: 0;
  display: flex;
  flex-direction: column;
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 6px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

#cig-users-panel .cig-table-container,
#cig-user-detail-panel .cig-table-container {
  padding: 0;
}

.cig-table-footer {
  padding: 10px 15px; background: #f8f9fa; border-top: 1px solid #dee2e6;
}

/* Pagination */
.cig-pagination {
  display: flex; align-items: center; justify-content: center; gap: 5px;
}
.cig-page-btn {
  padding: 5px 10px; border: 1px solid #dee2e6; background: #fff; border-radius: 3px;
  cursor: pointer; font-size: 12px; font-weight: 500; color: #495057;
  transition: all 0.2s ease; min-width: 30px; text-align: center;
}
.cig-page-btn:hover:not(:disabled) {
  background: #e9ecef; border-color: #50529d; color: #50529d;
}
.cig-page-btn.active {
  background: #50529d; color: #fff; border-color: #50529d; font-weight: 600;
}
.cig-page-btn:disabled { opacity: 0.4; cursor: not-allowed; background: #f8f9fa; }

/* Badges */
.cig-badge { display: inline-block; padding: 3px 8px; border-radius: 3px; font-size: 11px; font-weight: 600; }
.badge-sold { background: #d4edda; color: #155724; }
.badge-reserved { background: #fff3cd; color: #856404; }
.badge-canceled { background: #f8d7da; color: #721c24; }
.badge-payment {
  padding: 3px 8px; border-radius: 3px; font-size: 11px; font-weight: 600; white-space: nowrap;
}
.payment-company_transfer { background: #d1ecf1; color: #0c5460; }
.payment-cash { background: #d4edda; color: #155724; }
.payment-mixed { background: #fff3cd; color: #856404; }
.payment-consignment { background: #f8d7da; color: #721c24; }
.payment-credit { background: #e2e3e5; color: #383d41; }

/* Product Insight - Search Hero */
.cig-product-search-hero {
    background: linear-gradient(135deg, #50529d 0%, #3d3e7a 100%);
    padding: 30px;
    border-radius: 6px;
    text-align: center;
    margin-bottom: 25px;
    position: relative;
}
.cig-hero-input {
    width: 100%;
    max-width: 500px;
    padding: 12px 20px 12px 40px;
    font-size: 16px;
    border-radius: 50px;
    border: none;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    outline: none;
}
.cig-hero-icon {
    position: absolute;
    left: 0%;
    transform: translateX(-230px); 
    top: 50%;
    margin-top: -10px;
    font-size: 20px;
    color: #999;
}

/* Product Header Info */
.cig-pi-header {
    display: flex;
    gap: 20px;
    background: #fff;
    padding: 20px;
    border-radius: 6px;
    border: 1px solid #ddd;
    margin-bottom: 20px;
    align-items: center;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}
.cig-pi-image-wrapper {
    width: 80px;
    height: 80px;
    flex-shrink: 0;
    border-radius: 6px;
    overflow: hidden;
    border: 1px solid #eee;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f9f9f9;
}
.cig-pi-image-wrapper img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}
.cig-pi-details h2 {
    margin: 0 0 5px 0;
    font-size: 20px;
    color: #333;
}
.cig-pi-meta {
    display: flex;
    gap: 15px;
    font-size: 13px;
    color: #666;
}
.cig-pi-meta strong {
    color: #333;
}

/* Product Filter Buttons */
.cig-pi-filter-btn {
    padding: 6px 12px;
    border: 1px solid #ddd;
    background: #fff;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
}
.cig-pi-filter-btn.active {
    background: #50529d;
    color: #fff;
    border-color: #50529d;
}

/* Responsive */
@media (max-width: 1400px) {
  .cig-stats-grid { grid-template-columns: 1fr; }
}

@media (max-width: 1200px) {
  .cig-stats-summary { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 768px) {
  .cig-statistics-wrap { margin: 10px 10px 10px 0; }
  .cig-stats-main-title { flex-direction: column; gap: 10px; align-items: flex-start; }
  .cig-filters-row { flex-direction: column; }
  .cig-stats-summary { grid-template-columns: 1fr; }
  .cig-user-invoices-filters-inline { flex-direction: column; align-items: stretch; }
  .cig-user-invoices-filters-inline .cig-search-input { width: 100%; }
  .cig-users-header-inline,
  .cig-user-detail-header-inline { flex-direction: column; align-items: flex-start; gap: 15px; }
  .cig-user-info-card { flex-direction: column; text-align: center; }
  .user-info-stats { flex-direction: column; gap: 15px; width: 100%; }
  .cig-chart-wrapper { min-height: 220px; }
  
  /* PI Responsive */
  .cig-hero-icon { display: none; }
  .cig-hero-input { padding-left: 20px; transform: none; max-width: 100%; }
  .cig-pi-header { flex-direction: column; text-align: center; }
}

/* Animation */
.cig-user-detail-panel { animation: fadeSlide 0.25s ease; }
@keyframes fadeSlide {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}